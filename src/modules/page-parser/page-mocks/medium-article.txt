<!DOCTYPE html><html xmlns:cc="http://creativecommons.org/ns#"><head prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb# medium-com: http://ogp.me/ns/fb/medium-com#"><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><meta name="viewport" content="width=device-width, initial-scale=1"><title>Manage your services —node.js dependency injection – slava hatnuke – Medium</title><link rel="canonical" href="https://medium.com/@slavahatnuke/manage-your-services-node-js-dependency-injection-4412f4f62f84"><meta name="title" content="Manage your services —node.js dependency injection"><meta name="referrer" content="always"><meta name="description" content="Why? Because the dependency injection is the way to independence :). “Manage your services —node.js dependency injection” is published by slava hatnuke"><meta property="og:title" content="Manage your services —node.js dependency injection"><meta property="og:url" content="https://medium.com/@slavahatnuke/manage-your-services-node-js-dependency-injection-4412f4f62f84"><meta property="fb:app_id" content="542599432471018"><meta property="og:description" content="Why? Because the dependency injection is the way to independence :). “Manage your services —node.js dependency injection” is published by slava hatnuke"><meta name="twitter:description" content="Why? Because the dependency injection is the way to independence :). “Manage your services —node.js dependency injection” is published by slava hatnuke"><link rel="publisher" href="https://plus.google.com/103654360130207659246"><link rel="author" href="https://medium.com/@slavahatnuke"><meta name="author" content="slava hatnuke"><meta property="og:type" content="article"><meta name="twitter:card" content="summary"><meta property="article:publisher" content="https://www.facebook.com/medium"><meta property="article:author" content="https://medium.com/@slavahatnuke"><meta property="fb:smart_publish:robots" content="noauto"><meta name="robots" content="index, follow"><meta property="article:published_time" content="2016-06-15T21:57:20.092Z"><meta name="twitter:creator" content="@slavahatnuke"><meta name="twitter:site" content="@Medium"><meta property="og:site_name" content="Medium"><meta name="twitter:label1" value="Reading time"><meta name="twitter:data1" value="3 min read"><script type="application/ld+json">{"@context":"http://schema.org","@type":"NewsArticle","image":{"@type":"ImageObject","width":1920,"height":534,"url":"https://cdn-images-1.medium.com/max/1920/1*5ztbgEt4NqpVaxTc64C-XA.png"},"datePublished":"2016-06-15T21:57:20.092Z","dateModified":"2016-06-23T18:35:09.351Z","headline":"Manage your services —node.js dependency injection","name":"Manage your services —node.js dependency injection","keywords":["Nodejs","JavaScript","Dependency Injection","Object Oriented"],"author":{"@type":"Person","name":"slava hatnuke","url":"https://medium.com/@slavahatnuke"},"creator":["slava hatnuke"],"mainEntityOfPage":"https://medium.com/@slavahatnuke/manage-your-services-node-js-dependency-injection-4412f4f62f84"}</script><meta name="twitter:app:name:iphone" content="Medium"><meta name="twitter:app:id:iphone" content="828256236"><meta name="twitter:app:url:iphone" content="medium://p/4412f4f62f84"><meta property="al:ios:app_name" content="Medium"><meta property="al:ios:app_store_id" content="828256236"><meta property="al:android:package" content="com.medium.reader"><meta property="al:android:app_name" content="Medium"><meta property="al:ios:url" content="medium://p/4412f4f62f84"><meta property="al:android:url" content="medium://p/4412f4f62f84"><meta property="al:web:url" content="https://medium.com/@slavahatnuke/manage-your-services-node-js-dependency-injection-4412f4f62f84"><link rel="search" type="application/opensearchdescription+xml" title="Medium" href="/osd.xml" /><link rel="alternate" href="android-app://com.medium.reader/https/medium.com/p/4412f4f62f84" /><meta name="theme-color" content="#000000"><link rel="stylesheet" type="text/css" href="https://cdn-static-1.medium.com/_/fp/css/fonts-base.by5Oi_VbnwEIvhnWIsuUjA.css" /><link rel="stylesheet" href="https://cdn-static-1.medium.com/_/fp/css/main-base.r0K0XDRUlXeti3MBBStENg.css"><script>if (window.top !== window.self) window.top.location = window.self.location.href;var OB_startTime = new Date().getTime(); var OB_loadErrors = []; function _onerror(e) { OB_loadErrors.push(e) }; if (document.addEventListener) document.addEventListener("error", _onerror, true); else if (document.attachEvent) document.attachEvent("onerror", _onerror); function _asyncScript(u) {var d = document, f = d.getElementsByTagName("script")[0], s = d.createElement("script"); s.type = "text/javascript"; s.async = true; s.src = u; f.parentNode.insertBefore(s, f);}function _asyncStyles(u) {var d = document, f = d.getElementsByTagName("script")[0], s = d.createElement("link"); s.rel = "stylesheet"; s.href = u; f.parentNode.insertBefore(s, f); return s}var _gaq = _gaq || [];_gaq.push(["_setAccount", "UA-24232453-2"]); _gaq.push(["_setDomainName", window.location.hostname]); _gaq.push(["_setAllowLinker", true]); _gaq.push(["_trackPageview"]);_asyncScript(("https:" == document.location.protocol ? "https://ssl" : "http://www") + ".google-analytics.com/ga.js");(new Image()).src = "/_/stat?event=pixel.load&origin=" + encodeURIComponent(location.origin);</script><!--[if lt IE 9]><script charset="UTF-8" src="https://cdn-static-1.medium.com/_/fp/js/shiv.RI2ePTZ5gFmMgLzG5bEVAA.js"></script><![endif]--><link rel="icon" href="https://cdn-static-1.medium.com/_/fp/icons/favicon-medium.TAS6uQ-Y7kcKgi0xjcYHXw.ico" class="js-favicon"><link rel="apple-touch-icon" sizes="152x152" href="https://cdn-static-1.medium.com/_/fp/img/apple-touch-icon-ipad-retina.Akq8aSfZqfW1fceMxKqBZA.png"><link rel="apple-touch-icon" sizes="120x120" href="https://cdn-static-1.medium.com/_/fp/img/apple-touch-icon-iphone-retina.c211N_zSkSXPQk-ggPi4mQ.png"><link rel="apple-touch-icon" sizes="76x76" href="https://cdn-static-1.medium.com/_/fp/img/apple-touch-icon-ipad.LSTr_8Uf-3hSd7eDjoW_8g.png"><link rel="apple-touch-icon" href="https://cdn-static-1.medium.com/_/fp/img/apple-touch-icon.JWwtHOsKxVkBzoR3FSccjw.png"><link rel="mask-icon" href="https://cdn-static-1.medium.com/_/fp/icons/favicon.KjTfUJo7yJH_fCoUzzH3cg.svg" color="#171717"></head><body itemscope class=" postShowScreen browser-chrome is-withMagicUnderlines is-noJs"><script>document.body.className = document.body.className.replace(/(^|\s)is-noJs(\s|$)/, "$1is-js$2")</script><div class="site-main" id="container"><div class="butterBar butterBar--error"></div><div class="surface"><div id="prerendered" class="screenContent"><canvas class="canvas-renderer"></canvas><div class="container u-maxWidth740 u-xs-margin0 notesPositionContainer js-notesPositionContainer"></div><div class="metabar u-clearfix js-metabar"><div class="metabar-inner u-marginAuto u-maxWidth1000 u-paddingLeft20 u-paddingRight20 js-metabarMiddle"><div class="metabar-block metabar-block--left u-floatLeft u-height65 u-xs-height56"><a href="https://medium.com/" class="siteNav-logo" data-log-event="home"><span class="svgIcon svgIcon--logoNew svgIcon--45px is-flushLeft"><svg class="svgIcon-use" width="45" height="45"  viewBox="-17 18 45 45" data-multipart="true"><path d="M11.525 28.078c-.472-.225-.858.002-.858.506v20.044l8.616 4.113c.948.46 1.717.14 1.717-.7v-19.3a.22.22 0 0 0-.124-.19l-9.35-4.46v-.01z"/><path d="M.333 43.696l9.83-15.247c.278-.43.89-.6 1.36-.38l9.364 4.47c.06.03.082.1.047.15L10.666 48.63.333 43.698v-.002z"/><path d="M-8.57 28.35c-.786-.375-1.053-.096-.592.62L.333 43.696l10.333 4.932L.356 32.635a.156.156 0 0 0-.06-.054l-8.866-4.23z"/><path d="M.333 52.033c0 .84-.643 1.22-1.43.844l-8.045-3.84c-.472-.224-.858-.82-.858-1.325V28.89c0-.672.515-.976 1.145-.675l9.133 4.36a.092.092 0 0 1 .055.084v19.37z"/></svg></span><span class="u-textScreenReader">Homepage</span></a></div><div class="metabar-block u-floatRight u-xs-absolute u-xs-textAlignRight u-xs-right0 u-xs-marginRight20 u-height65 u-xs-height56"><div class="buttonSet"><label class="inputGroup u-sm-hide metabar-predictiveSearch u-baseColor--placeholderNormal  u-lineHeight30 u-height32 u-verticalAlignMiddle" title="Search Medium"><span class="svgIcon svgIcon--search svgIcon--25px u-textColorNormal u-baseColor--iconLight"><svg class="svgIcon-use" width="25" height="25"  viewBox="0 0 25 25"><path d="M20.067 18.933l-4.157-4.157a6 6 0 1 0-.884.884l4.157 4.157a.624.624 0 1 0 .884-.884zM6.5 11c0-2.62 2.13-4.75 4.75-4.75S16 8.38 16 11s-2.13 4.75-4.75 4.75S6.5 13.62 6.5 11z"/></svg></span><input class="js-predictiveSearchInput textInput textInput--rounded textInput--darkText u-baseColor--textNormal textInput--transparent  u-lineHeight30 u-height32 u-verticalAlignMiddle" type="search" placeholder="Search Medium" required="true" /></label><a class="button button--small button--chromeless u-sm-show is-inSiteNavBar u-baseColor--buttonNormal button--withIcon button--withSvgIcon u-xs-top2"  href="https://medium.com/search" title="Search" aria-label="Search"><span class="button-defaultState"><span class="svgIcon svgIcon--search svgIcon--25px"><svg class="svgIcon-use" width="25" height="25"  viewBox="0 0 25 25"><path d="M20.067 18.933l-4.157-4.157a6 6 0 1 0-.884.884l4.157 4.157a.624.624 0 1 0 .884-.884zM6.5 11c0-2.62 2.13-4.75 4.75-4.75S16 8.38 16 11s-2.13 4.75-4.75 4.75S6.5 13.62 6.5 11z"/></svg></span></span></a><button class="button button--small button--circle button--chromeless is-touchIconBlackPulse is-inSiteNavBar u-baseColor--buttonNormal button--withIcon button--withSvgIcon button--activity js-notificationsButton"  title="Notifications" aria-label="Notifications" data-action="open-notifications"><span class="svgIcon svgIcon--bell svgIcon--25px"><svg class="svgIcon-use" width="25" height="25"  viewBox="-293 409 25 25"><path d="M-273.327 423.67l-1.673-1.52v-3.646a5.5 5.5 0 0 0-6.04-5.474c-2.86.273-4.96 2.838-4.96 5.71v3.41l-1.68 1.553c-.204.19-.32.456-.32.734V427a1 1 0 0 0 1 1h3.49a3.079 3.079 0 0 0 3.01 2.45 3.08 3.08 0 0 0 3.01-2.45h3.49a1 1 0 0 0 1-1v-2.59c0-.28-.12-.55-.327-.74zm-7.173 5.63c-.842 0-1.55-.546-1.812-1.3h3.624a1.92 1.92 0 0 1-1.812 1.3zm6.35-2.45h-12.7v-2.347l1.63-1.51c.236-.216.37-.522.37-.843v-3.41c0-2.35 1.72-4.356 3.92-4.565a4.353 4.353 0 0 1 4.78 4.33v3.645c0 .324.137.633.376.85l1.624 1.477v2.373z"/></svg></span></button><button class="button button--chromeless u-baseColor--buttonNormal is-inSiteNavBar js-userActions"  aria-haspopup="true" data-action="open-userActions"><div class="avatar"><img  src="https://cdn-images-1.medium.com/fit/c/32/32/0*gIsElKkAYGrurD0_.png" class="avatar-image avatar-image--icon" alt="Mue Mue"></div></button></div></div></div></div><div class="metabar metabar--spacer js-metabarSpacer u-height65 u-xs-height56"></div><div class="postActionsBar js-postActionsBar"><div class="postActionsBar-container container"><div class="postActionsBar-content row js-postActionsBarContent"><div class="postActions u-marginAuto u-height44 u-maxWidth1250 u-padding0 u-relative"><div class="u-absolute u-right0 u-marginRight20 js-readNextInteractions"><div class="u-floatLeft"><div class="u-floatRight buttonSet"><div class="buttonSet-inner"><button class="button button--large button--dark button--chromeless is-touchIconBlackPulse u-baseColor--buttonDark button--withIcon button--withSvgIcon"  title="Share on Twitter" aria-label="Share on Twitter" data-action="share-on-twitter" data-action-source="post_actions_bar"><span class="svgIcon svgIcon--twitter svgIcon--29px"><svg class="svgIcon-use" width="29" height="29" viewBox="0 0 29 29" ><path d="M21.967 11.8c.018 5.93-4.607 11.18-11.177 11.18-2.172 0-4.25-.62-6.047-1.76l-.268.422-.038.5.186.013.168.012c.3.02.44.032.6.046 2.06-.026 3.95-.686 5.49-1.86l1.12-.85-1.4-.048c-1.57-.055-2.92-1.08-3.36-2.51l-.48.146-.05.5c.22.03.48.05.75.08.48-.02.87-.07 1.25-.15l2.33-.49-2.32-.49c-1.68-.35-2.91-1.83-2.91-3.55 0-.05 0-.01-.01.03l-.49-.1-.25.44c.63.36 1.35.57 2.07.58l1.7.04L7.4 13c-.978-.662-1.59-1.79-1.618-3.047a4.08 4.08 0 0 1 .524-1.8l-.825.07a12.188 12.188 0 0 0 8.81 4.515l.59.033-.06-.59v-.02c-.05-.43-.06-.63-.06-.87a3.617 3.617 0 0 1 6.27-2.45l.2.21.28-.06c1.01-.22 1.94-.59 2.73-1.09l-.75-.56c-.1.36-.04.89.12 1.36.23.68.58 1.13 1.17.85l-.21-.45-.42-.27c-.52.8-1.17 1.48-1.92 2L22 11l.016.28c.013.2.014.35 0 .52v.04zm.998.038c.018-.22.017-.417 0-.66l-.498.034.284.41a8.183 8.183 0 0 0 2.2-2.267l.97-1.48-1.6.755c.17-.08.3-.02.34.03a.914.914 0 0 1-.13-.292c-.1-.297-.13-.64-.1-.766l.36-1.254-1.1.695c-.69.438-1.51.764-2.41.963l.48.15a4.574 4.574 0 0 0-3.38-1.484 4.616 4.616 0 0 0-4.61 4.613c0 .29.02.51.08.984l.01.02.5-.06.03-.5c-3.17-.18-6.1-1.7-8.08-4.15l-.48-.56-.36.64c-.39.69-.62 1.48-.65 2.28.04 1.61.81 3.04 2.06 3.88l.3-.92c-.55-.02-1.11-.17-1.6-.45l-.59-.34-.14.67c-.02.08-.02.16 0 .24-.01 2.12 1.55 4.01 3.69 4.46l.1-.49-.1-.49c-.33.07-.67.12-1.03.14-.18-.02-.43-.05-.64-.07l-.76-.09.23.73c.57 1.84 2.29 3.14 4.28 3.21l-.28-.89a8.252 8.252 0 0 1-4.85 1.66c-.12-.01-.26-.02-.56-.05l-.17-.01-.18-.01L2.53 21l1.694 1.07a12.233 12.233 0 0 0 6.58 1.917c7.156 0 12.2-5.73 12.18-12.18l-.002.04z"/></svg></span></button></div><div class="buttonSet-inner"><button class="button button--large button--dark button--chromeless is-touchIconBlackPulse u-baseColor--buttonDark button--withIcon button--withSvgIcon"  title="Share on Facebook" aria-label="Share on Facebook" data-action="share-on-facebook" data-action-source="post_actions_bar"><span class="svgIcon svgIcon--facebook svgIcon--29px"><svg class="svgIcon-use" width="29" height="29" viewBox="0 0 29 29" ><path d="M16.39 23.61v-5.808h1.846a.55.55 0 0 0 .546-.48l.36-2.797a.551.551 0 0 0-.547-.62H16.39V12.67c0-.67.12-.813.828-.813h1.474a.55.55 0 0 0 .55-.55V8.803a.55.55 0 0 0-.477-.545c-.436-.06-1.36-.116-2.22-.116-2.5 0-4.13 1.62-4.13 4.248v1.513H10.56a.551.551 0 0 0-.55.55v2.797c0 .304.248.55.55.55h1.855v5.76c-4.172-.96-7.215-4.7-7.215-9.1 0-5.17 4.17-9.36 9.31-9.36 5.14 0 9.31 4.19 9.31 9.36 0 4.48-3.155 8.27-7.43 9.15M14.51 4C8.76 4 4.1 8.684 4.1 14.46c0 5.162 3.75 9.523 8.778 10.32a.55.55 0 0 0 .637-.543v-6.985a.551.551 0 0 0-.55-.55H11.11v-1.697h1.855a.55.55 0 0 0 .55-.55v-2.063c0-2.02 1.136-3.148 3.03-3.148.567 0 1.156.027 1.597.06v1.453h-.924c-1.363 0-1.93.675-1.93 1.912v1.78c0 .3.247.55.55.55h2.132l-.218 1.69H15.84c-.305 0-.55.24-.55.55v7.02c0 .33.293.59.623.54 5.135-.7 9.007-5.11 9.007-10.36C24.92 8.68 20.26 4 14.51 4"/></svg></span></button></div><div class="buttonSet-inner"><button class="button button--large button--dark button--chromeless is-touchIconFadeInPulse u-baseColor--buttonDark button--withIcon button--withSvgIcon button--bookmark js-bookmarkButton"  title="Bookmark this story to read later" aria-label="Bookmark this story to read later" data-action="add-to-bookmarks" data-action-value="4412f4f62f84"><span class="button-defaultState"><span class="svgIcon svgIcon--bookmark svgIcon--29px"><svg class="svgIcon-use" width="29" height="29" viewBox="0 0 29 29" ><path d="M19.385 4h-9.77A2.623 2.623 0 0 0 7 6.615V23.01a1.022 1.022 0 0 0 1.595.847l5.905-4.004 5.905 4.004A1.022 1.022 0 0 0 22 23.011V6.62A2.625 2.625 0 0 0 19.385 4zM21 23l-5.91-3.955-.148-.107a.751.751 0 0 0-.884 0l-.147.107L8 23V6.615C8 5.725 8.725 5 9.615 5h9.77C20.275 5 21 5.725 21 6.615V23z" fill-rule="evenodd"/></svg></span></span><span class="button-activeState"><span class="svgIcon svgIcon--bookmarkFilled svgIcon--29px"><svg class="svgIcon-use" width="29" height="29" viewBox="0 0 29 29" ><path d="M19.385 4h-9.77A2.623 2.623 0 0 0 7 6.615V23.01a1.022 1.022 0 0 0 1.595.847l5.905-4.004 5.905 4.004A1.022 1.022 0 0 0 22 23.011V6.62A2.625 2.625 0 0 0 19.385 4z" fill-rule="evenodd"/></svg></span></span></button></div></div></div><div class="col u-xs-hide u-height44 u-width255 u-padding0 u-marginLeft0 u-verticalAlignTop u-foreground u-block u-floatLeft js-readNextMetabarRight"></div></div><div class="container u-maxWidth740 u-height44 u-marginAuto js-postActions-actionButtons"><div class="u-floatLeft buttonSet buttonSet--withLabels"><div class="buttonSet-inner"><div class="js-actionRecommend" data-post-id="4412f4f62f84" data-is-icon-29px="true" data-has-recommend-list="true" data-source="post_actions_bar"><button class="button button--primary button--large button--chromeless is-touchIconFadeInPulse u-accentColor--buttonNormal button--withIcon button--withSvgIcon u-accentColor--iconLight js-actionRecommendButton"  title="Recommend to share this article with your followers and let the author know you liked it" aria-label="Recommend to share this article with your followers and let the author know you liked it" data-action="upvote" data-action-value="4412f4f62f84" data-action-source="post_actions_bar"><span class="button-defaultState"><span class="svgIcon svgIcon--heart svgIcon--29px"><svg class="svgIcon-use" width="29" height="29" viewBox="0 0 29 29" ><path d="M16.215 23.716c-.348.288-.984.826-1.376 1.158a.526.526 0 0 1-.68 0c-.36-.307-.92-.78-1.22-1.03C9.22 20.734 3 15.527 3 10.734 3 7.02 5.916 4 9.5 4c1.948 0 3.77.898 5 2.434C15.73 4.898 17.552 4 19.5 4c3.584 0 6.5 3.02 6.5 6.734 0 4.9-6.125 9.96-9.785 12.982zM19.5 5.2c-1.774 0-3.423.923-4.41 2.468a.699.699 0 0 1-.59.323.706.706 0 0 1-.59-.32c-.988-1.54-2.637-2.47-4.41-2.47-2.922 0-5.3 2.49-5.3 5.54 0 4.23 6.19 9.41 9.517 12.19.217.18.566.48.783.66l.952-.79c3.496-2.88 9.348-7.72 9.348-12.05 0-3.05-2.378-5.53-5.3-5.53z"/></svg></span></span><span class="button-activeState"><span class="svgIcon svgIcon--heartFilled svgIcon--29px"><svg class="svgIcon-use" width="29" height="29" viewBox="0 0 29 29" ><path d="M19.5 4c-1.948 0-3.77.898-5 2.434C13.27 4.898 11.448 4 9.5 4 5.916 4 3 7.02 3 10.734c0 4.793 6.227 10 9.95 13.11.296.25.853.723 1.212 1.03.196.166.48.166.677 0 .39-.332 1.02-.87 1.37-1.158 3.66-3.022 9.79-8.08 9.79-12.982C26 7.02 23.08 4 19.5 4z" fill-rule="evenodd"/></svg></span></span></button><button class="button button--chromeless u-baseColor--buttonNormal"  data-action="show-recommends" data-action-value="4412f4f62f84">8</button></div></div><div class="buttonSet-inner"><button class="button button--large button--dark button--chromeless is-touchIconBlackPulse u-baseColor--buttonDark button--withIcon button--withSvgIcon"  data-action="respond" data-action-source="post_actions_bar"><span class="svgIcon svgIcon--response svgIcon--29px"><svg class="svgIcon-use" width="29" height="29" viewBox="0 0 29 29" ><path d="M21.27 20.058c1.89-1.826 2.754-4.17 2.754-6.674C24.024 8.21 19.67 4 14.1 4 8.53 4 4 8.21 4 13.384c0 5.175 4.53 9.385 10.1 9.385 1.007 0 2-.14 2.95-.41.285.25.592.49.918.7 1.306.87 2.716 1.31 4.19 1.31.276-.01.494-.14.6-.36a.625.625 0 0 0-.052-.65c-.61-.84-1.042-1.71-1.282-2.58a5.417 5.417 0 0 1-.154-.75zm-3.85 1.324l-.083-.28-.388.12a9.72 9.72 0 0 1-2.85.424c-4.96 0-8.99-3.706-8.99-8.262 0-4.556 4.03-8.263 8.99-8.263 4.95 0 8.77 3.71 8.77 8.27 0 2.25-.75 4.35-2.5 5.92l-.24.21v.32c0 .07 0 .19.02.37.03.29.1.6.19.92.19.7.49 1.4.89 2.08-.93-.14-1.83-.49-2.67-1.06-.34-.22-.88-.48-1.16-.74z"/></svg></span></button><button class="button button--chromeless u-baseColor--buttonNormal"  data-action="scroll-to-responses">1</button></div></div></div></div></div></div></div><div class="container u-maxWidth740"><div class="js-postShareWidget u-foreground u-sm-hide u-marginLeftNegative100 u-transition--fadeOut300 u-fixed"><ul><li class="u-uiTextSemibold u-textAlignCenter u-textColorNormal u-fontSizeSmallest u-textUppercase">Share</li><li class="u-textAlignCenter"><div class="js-actionRecommend" data-post-id="4412f4f62f84" data-is-icon-29px="true" data-is-vertical="true" data-has-recommend-list="true" data-source="post_share_widget"><button class="button button--primary button--large button--chromeless is-touchIconFadeInPulse u-accentColor--buttonNormal button--withIcon button--withSvgIcon u-accentColor--iconLight js-actionRecommendButton"  title="Recommend to share this article with your followers and let the author know you liked it" aria-label="Recommend to share this article with your followers and let the author know you liked it" data-action="upvote" data-action-value="4412f4f62f84" data-action-source="post_share_widget"><span class="button-defaultState"><span class="svgIcon svgIcon--heart svgIcon--29px"><svg class="svgIcon-use" width="29" height="29" viewBox="0 0 29 29" ><path d="M16.215 23.716c-.348.288-.984.826-1.376 1.158a.526.526 0 0 1-.68 0c-.36-.307-.92-.78-1.22-1.03C9.22 20.734 3 15.527 3 10.734 3 7.02 5.916 4 9.5 4c1.948 0 3.77.898 5 2.434C15.73 4.898 17.552 4 19.5 4c3.584 0 6.5 3.02 6.5 6.734 0 4.9-6.125 9.96-9.785 12.982zM19.5 5.2c-1.774 0-3.423.923-4.41 2.468a.699.699 0 0 1-.59.323.706.706 0 0 1-.59-.32c-.988-1.54-2.637-2.47-4.41-2.47-2.922 0-5.3 2.49-5.3 5.54 0 4.23 6.19 9.41 9.517 12.19.217.18.566.48.783.66l.952-.79c3.496-2.88 9.348-7.72 9.348-12.05 0-3.05-2.378-5.53-5.3-5.53z"/></svg></span></span><span class="button-activeState"><span class="svgIcon svgIcon--heartFilled svgIcon--29px"><svg class="svgIcon-use" width="29" height="29" viewBox="0 0 29 29" ><path d="M19.5 4c-1.948 0-3.77.898-5 2.434C13.27 4.898 11.448 4 9.5 4 5.916 4 3 7.02 3 10.734c0 4.793 6.227 10 9.95 13.11.296.25.853.723 1.212 1.03.196.166.48.166.677 0 .39-.332 1.02-.87 1.37-1.158 3.66-3.022 9.79-8.08 9.79-12.982C26 7.02 23.08 4 19.5 4z" fill-rule="evenodd"/></svg></span></span></button><button class="button button--chromeless u-baseColor--buttonNormal  u-block u-marginAuto u-marginTopNegative5"  data-action="show-recommends" data-action-value="4412f4f62f84">8</button></div></li><li class="u-textAlignCenter"><button class="button button--large button--dark button--chromeless is-touchIconBlackPulse u-baseColor--buttonDark button--withIcon button--withSvgIcon"  title="Share on Twitter" aria-label="Share on Twitter" data-action="share-on-twitter" data-action-source="post_share_widget"><span class="svgIcon svgIcon--twitter svgIcon--29px"><svg class="svgIcon-use" width="29" height="29" viewBox="0 0 29 29" ><path d="M21.967 11.8c.018 5.93-4.607 11.18-11.177 11.18-2.172 0-4.25-.62-6.047-1.76l-.268.422-.038.5.186.013.168.012c.3.02.44.032.6.046 2.06-.026 3.95-.686 5.49-1.86l1.12-.85-1.4-.048c-1.57-.055-2.92-1.08-3.36-2.51l-.48.146-.05.5c.22.03.48.05.75.08.48-.02.87-.07 1.25-.15l2.33-.49-2.32-.49c-1.68-.35-2.91-1.83-2.91-3.55 0-.05 0-.01-.01.03l-.49-.1-.25.44c.63.36 1.35.57 2.07.58l1.7.04L7.4 13c-.978-.662-1.59-1.79-1.618-3.047a4.08 4.08 0 0 1 .524-1.8l-.825.07a12.188 12.188 0 0 0 8.81 4.515l.59.033-.06-.59v-.02c-.05-.43-.06-.63-.06-.87a3.617 3.617 0 0 1 6.27-2.45l.2.21.28-.06c1.01-.22 1.94-.59 2.73-1.09l-.75-.56c-.1.36-.04.89.12 1.36.23.68.58 1.13 1.17.85l-.21-.45-.42-.27c-.52.8-1.17 1.48-1.92 2L22 11l.016.28c.013.2.014.35 0 .52v.04zm.998.038c.018-.22.017-.417 0-.66l-.498.034.284.41a8.183 8.183 0 0 0 2.2-2.267l.97-1.48-1.6.755c.17-.08.3-.02.34.03a.914.914 0 0 1-.13-.292c-.1-.297-.13-.64-.1-.766l.36-1.254-1.1.695c-.69.438-1.51.764-2.41.963l.48.15a4.574 4.574 0 0 0-3.38-1.484 4.616 4.616 0 0 0-4.61 4.613c0 .29.02.51.08.984l.01.02.5-.06.03-.5c-3.17-.18-6.1-1.7-8.08-4.15l-.48-.56-.36.64c-.39.69-.62 1.48-.65 2.28.04 1.61.81 3.04 2.06 3.88l.3-.92c-.55-.02-1.11-.17-1.6-.45l-.59-.34-.14.67c-.02.08-.02.16 0 .24-.01 2.12 1.55 4.01 3.69 4.46l.1-.49-.1-.49c-.33.07-.67.12-1.03.14-.18-.02-.43-.05-.64-.07l-.76-.09.23.73c.57 1.84 2.29 3.14 4.28 3.21l-.28-.89a8.252 8.252 0 0 1-4.85 1.66c-.12-.01-.26-.02-.56-.05l-.17-.01-.18-.01L2.53 21l1.694 1.07a12.233 12.233 0 0 0 6.58 1.917c7.156 0 12.2-5.73 12.18-12.18l-.002.04z"/></svg></span></button></li><li class="u-textAlignCenter"><button class="button button--large button--dark button--chromeless is-touchIconBlackPulse u-baseColor--buttonDark button--withIcon button--withSvgIcon"  title="Share on Facebook" aria-label="Share on Facebook" data-action="share-on-facebook" data-action-source="post_share_widget"><span class="svgIcon svgIcon--facebook svgIcon--29px"><svg class="svgIcon-use" width="29" height="29" viewBox="0 0 29 29" ><path d="M16.39 23.61v-5.808h1.846a.55.55 0 0 0 .546-.48l.36-2.797a.551.551 0 0 0-.547-.62H16.39V12.67c0-.67.12-.813.828-.813h1.474a.55.55 0 0 0 .55-.55V8.803a.55.55 0 0 0-.477-.545c-.436-.06-1.36-.116-2.22-.116-2.5 0-4.13 1.62-4.13 4.248v1.513H10.56a.551.551 0 0 0-.55.55v2.797c0 .304.248.55.55.55h1.855v5.76c-4.172-.96-7.215-4.7-7.215-9.1 0-5.17 4.17-9.36 9.31-9.36 5.14 0 9.31 4.19 9.31 9.36 0 4.48-3.155 8.27-7.43 9.15M14.51 4C8.76 4 4.1 8.684 4.1 14.46c0 5.162 3.75 9.523 8.778 10.32a.55.55 0 0 0 .637-.543v-6.985a.551.551 0 0 0-.55-.55H11.11v-1.697h1.855a.55.55 0 0 0 .55-.55v-2.063c0-2.02 1.136-3.148 3.03-3.148.567 0 1.156.027 1.597.06v1.453h-.924c-1.363 0-1.93.675-1.93 1.912v1.78c0 .3.247.55.55.55h2.132l-.218 1.69H15.84c-.305 0-.55.24-.55.55v7.02c0 .33.293.59.623.54 5.135-.7 9.007-5.11 9.007-10.36C24.92 8.68 20.26 4 14.51 4"/></svg></span></button></li></ul></div></div><main role="main" class="u-block"><article class=" u-sizeViewHeightMin100 postArticle postArticle--full"  lang="en"><header class="container u-maxWidth740"><div class="postMetaHeader u-paddingBottom10 row"><div class="col u-size12of12 js-postMetaLockup"><div class="postMetaLockup postMetaLockup--authorWithBio u-flex js-postMetaLockup"><div class="u-flex0"><a class="link avatar u-baseColor--link"  href="https://medium.com/@slavahatnuke?source=post_header_lockup" data-action="show-user-card" data-action-source="post_header_lockup" data-action-value="38a6df4978c2" data-action-type="hover" data-user-id="38a6df4978c2" dir="auto"><img  src="https://cdn-images-1.medium.com/fit/c/40/40/0*Q8olK_tLvp-UYB9W.jpeg" class="avatar-image avatar-image--smaller" alt="Go to the profile of slava hatnuke"></a></div><div class="u-flex1 u-paddingLeft15 u-overflowHidden"><a class="link link link--darken link--darker u-baseColor--link"  href="https://medium.com/@slavahatnuke?source=post_header_lockup" data-action="show-user-card" data-action-source="post_header_lockup" data-action-value="38a6df4978c2" data-action-type="hover" data-user-id="38a6df4978c2" dir="auto">slava hatnuke</a><span class="followState js-followState buttonSet-inner" data-user-id="38a6df4978c2"><button class="button u-paddingLeft10 u-paddingRight10 u-height19 u-lineHeight13 u-verticalAlignMiddle u-fontSizeSmallest u-uiTextMedium u-noUserSelect button--withChrome u-baseColor--buttonNormal button--withHover button--unblock js-unblockButton u-marginLeft10 u-marginTopNegative2 u-xs-hide"  data-action="toggle-block-user" data-action-value="38a6df4978c2" data-action-source="post_header_lockup"><span class="button-label  button-defaultState">Blocked</span><span class="button-label button-hoverState">Unblock</span></button><button class="button button--primary u-paddingLeft10 u-paddingRight10 u-height19 u-lineHeight13 u-verticalAlignMiddle u-fontSizeSmallest u-uiTextMedium u-noUserSelect button--withChrome u-accentColor--buttonNormal button--follow js-followButton u-marginLeft10 u-marginTopNegative2 u-xs-hide"  data-action="toggle-subscribe-user" data-action-value="38a6df4978c2" data-action-source="post_header_lockup_follow" data-subscribe-source="post_header_lockup" data-follow-context-entity-id="4412f4f62f84"><span class="button-label  button-defaultState js-buttonLabel">Follow</span><span class="button-label button-activeState">Following</span></button></span><div class="postMetaInline js-testPostMetaInlineSupplemental"><time datetime="2016-06-15T21:57:20.092Z">Jun 15</time><span class="middotDivider u-fontSizeSmallest"></span><span class="readingTime" title="3 min read"></span></div></div></div></div></div></header><div class="postArticle-content js-postField js-notesSource js-trackedPost"  data-post-id="4412f4f62f84" data-source="post_page" data-tracking-context="postPage"><section name="d30b" class="section section--body section--first section--last"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><h1 name="f078" id="f078" class="graf graf--h3 graf--leading graf--title">Manage your services —node.js dependency injection</h1><p name="3caf" id="3caf" class="graf graf--p graf-after--h3">Why? Because the dependency injection is the way to independence :)</p><p name="6042" id="6042" class="graf graf--p graf-after--p">What does the dependency injection container do? I will try to answer this question.</p><p name="a897" id="a897" class="graf graf--p graf-after--p">We are working with a project that has been developed for 3 years and in which about 100 database entities. In addition, Redis, Neo4j, MySQL, caching, search. In general, all as usual complex.</p><p name="448d" id="448d" class="graf graf--p graf-after--p">This project uses an approach in which each entity has a Repository.</p><p name="a864" id="a864" class="graf graf--p graf-after--p">To put it simply if we have the User model we have UserRepository which stores the business logic.</p><p name="cf6a" id="cf6a" class="graf graf--p graf-after--p">Schematically, I will show it like this:</p><pre name="fee8" id="fee8" class="graf graf--pre graf-after--p">User -&gt; UserRepository</pre><p name="7a00" id="7a00" class="graf graf--p graf-after--pre">This approach is good, because application logic that stored on the controller level looks much worse. All of this can be shown as:</p><pre name="83be" id="83be" class="graf graf--pre graf-after--p">Game -&gt; GameRepository<br>Card -&gt; CardRepository<br>Payment -&gt; PaymentRepository<br>....</pre><p name="df0f" id="df0f" class="graf graf--p graf-after--pre">So we have 100 repositories. Here is an example:</p><pre name="e9f0" id="e9f0" class="graf graf--pre graf-after--p">// UserRepository.js<br>module.exports = function (app) {</pre><pre name="48a7" id="48a7" class="graf graf--pre graf-after--pre">function UserRepository() {<br>  this.User = mongoose.model(&#39;User&#39;)<br>}</pre><pre name="3a38" id="3a38" class="graf graf--pre graf-after--pre">UserRepository.prototype.getFriends = function (user) {<br> // business logic here<br>}</pre><pre name="4535" id="4535" class="graf graf--pre graf-after--pre">app.set(&#39;userRepository&#39;, new UserRepository());</pre><pre name="f396" id="f396" class="graf graf--pre graf-after--pre">}</pre><p name="70b9" id="70b9" class="graf graf--p graf-after--pre">This approach allows us to store application business logic.</p><p name="e057" id="e057" class="graf graf--p graf-after--p">Example of initializing such repository:</p><pre name="be4e" id="be4e" class="graf graf--pre graf-after--p">// app.js<br>var express = require(&#39;express&#39;);<br>var app = express();</pre><pre name="6229" id="6229" class="graf graf--pre graf-after--pre">require(&#39;./User&#39;)(app);<br>require(&#39;./UserRepository&#39;)(app);</pre><pre name="9833" id="9833" class="graf graf--pre graf-after--pre">var userRepository = app.get(&#39;userRepository&#39;);</pre><p name="788f" id="788f" class="graf graf--p graf-after--pre">At this stage, it looks easy, till we do not take into account all the possible variations of initialization the 100 repositories and 100 entities.</p><p name="d967" id="d967" class="graf graf--p graf-after--p">I propose to add GameRepository.</p><pre name="3925" id="3925" class="graf graf--pre graf-after--p">// app.js<br>var express = require(&#39;express&#39;);<br>var app = express();</pre><pre name="d93b" id="d93b" class="graf graf--pre graf-after--pre"><strong class="markup--strong markup--pre-strong">require(&#39;./Game&#39;)(app);<br>require(&#39;./GameRepository&#39;)(app); </strong></pre><pre name="ca58" id="ca58" class="graf graf--pre graf-after--pre">require(&#39;./User&#39;)(app);<br>require(&#39;./UserRepository&#39;)(app);</pre><pre name="767c" id="767c" class="graf graf--pre graf-after--pre">var userRepository = app.get(&#39;userRepository&#39;);</pre><p name="430f" id="430f" class="graf graf--p graf-after--pre">But if we used UserRepository in GameRepository, we do not have such opportunity to get it, because it hasn’t been created yet.</p><p name="7e77" id="7e77" class="graf graf--p graf-after--p">In this case, everything is simple, we can change the initialization and the issue is solved.</p><pre name="1201" id="1201" class="graf graf--pre graf-after--p">require(&#39;./User&#39;)(app);<br>require(&#39;./UserRepository&#39;)(app);</pre><pre name="39a7" id="39a7" class="graf graf--pre graf-after--pre">require(&#39;./Game&#39;)(app);<br>require(&#39;./GameRepository&#39;)(app); <br><strong class="markup--strong markup--pre-strong">// UserRepository can be used. [SOLVED]</strong></pre><p name="ac33" id="ac33" class="graf graf--p graf-after--pre">Let us remember that we have a 100 entities + 100 repositories. And when we move the initialization of one of the repositories we can break another repository. <strong class="markup--strong markup--p-strong">It looks like a hell :)</strong></p><p name="8e57" id="8e57" class="graf graf--p graf-after--p">But that’s not all the problems. Let’s imagine that we need PlayerService that uses GameRepository and UserRepository. And GameRepostiory uses UserRepository.</p><p name="3264" id="3264" class="graf graf--p graf-after--p">Here is an example of code:</p><pre name="ee07" id="ee07" class="graf graf--pre graf-after--p">var userRepository = new UserRepository(User);<br>var gameRepository = new GameRepository(Game, userRepository)</pre><pre name="8eaa" id="8eaa" class="graf graf--pre graf-after--pre">var playerService = new PlayerService(userRepository, gameRepository);</pre><pre name="2033" id="2033" class="graf graf--pre graf-after--pre">playerService.getActivity().then(...) /// just for example</pre><p name="1df8" id="1df8" class="graf graf--p graf-after--pre">Actually I was only needed PlayerService but because it has dependencies on other I have to worry about creating dependencies.</p><p name="44d2" id="44d2" class="graf graf--p graf-after--p">It was decided to use a dependency injection container.</p><p name="d798" id="d798" class="graf graf--p graf-after--p">As developer I would like to take services (repositories) from the container and use it. I would be happy if it looked like this.</p><pre name="c16a" id="c16a" class="graf graf--pre graf-after--p">container.get(&#39;GameRepository&#39;).getUserGames(user).then(......)</pre><p name="99b6" id="99b6" class="graf graf--p graf-after--pre">or</p><pre name="67dc" id="67dc" class="graf graf--pre graf-after--p">container.get(&#39;PlayerService&#39;).getActivity().then(...)</pre><p name="2aa8" id="2aa8" class="graf graf--p graf-after--pre">And all the work of creating the repository and processing dependencies was on the dependency injection container side.</p><p name="488c" id="488c" class="graf graf--p graf-after--p">Let’s look at how the container works.</p><p name="db7b" id="db7b" class="graf graf--p graf-after--p">First imagine a container in which I can register services.</p><pre name="7f9b" id="7f9b" class="graf graf--pre graf-after--p">var container = new Container();<br>container.register([SERVICE_NAME], [SERVICE], [DEPENDENCIES])</pre><p name="e8eb" id="e8eb" class="graf graf--p graf-after--pre">In this example, let’s initialize UserRepository</p><pre name="3ad8" id="3ad8" class="graf graf--pre graf-after--p">var container = new Container();</pre><pre name="032e" id="032e" class="graf graf--pre graf-after--pre">container<br>  .register(&#39;UserRepository&#39;, require(&#39;./UserRepository&#39;);</pre><p name="1f65" id="1f65" class="graf graf--p graf-after--pre">Here is an UserRepository example</p><pre name="1430" id="1430" class="graf graf--pre graf-after--p">// UserRepository.js<br>function UserRepository() {}</pre><pre name="7d96" id="7d96" class="graf graf--pre graf-after--pre">UserRepository.prototype.getFriends = function (user) {<br> // business logic here<br>}</pre><pre name="12f1" id="12f1" class="graf graf--pre graf-after--pre">module.exports = UserRepository;</pre><p name="b146" id="b146" class="graf graf--p graf-after--pre">If I ask the container to get repository I want to get it! How it was created and how dependencies have been processed — it is the responsibility of the container.</p><pre name="506f" id="506f" class="graf graf--pre graf-after--p">var repository = container.get(&#39;UserRepository&#39;);<br>repository instanceof UserRepository // true</pre><p name="6d61" id="6d61" class="graf graf--p graf-after--pre">But where is dependency injection? Yes I agree. In this example, no dependencies.</p><p name="b257" id="b257" class="graf graf--p graf-after--p">Let’s return back to the services registration. We are creating a container with several services that have dependencies.</p><pre name="2093" id="2093" class="graf graf--pre graf-after--p">var container = new Container();</pre><pre name="6610" id="6610" class="graf graf--pre graf-after--pre">container<br>  .register(&#39;<strong class="markup--strong markup--pre-strong">User</strong>&#39;, require(&#39;./User&#39;));</pre><pre name="f250" id="f250" class="graf graf--pre graf-after--pre">container<br>  .register(&#39;UserRepository&#39;, require(&#39;./UserRepository&#39;), <strong class="markup--strong markup--pre-strong">[&#39;User&#39;]</strong>);</pre><pre name="72cc" id="72cc" class="graf graf--pre graf-after--pre">container<br>  .register(&#39;<strong class="markup--strong markup--pre-strong">Game</strong>&#39;, require(&#39;./Game&#39;));</pre><pre name="dca6" id="dca6" class="graf graf--pre graf-after--pre">container<br>  .register(&#39;GameRepository&#39;, require(&#39;./GameRepository&#39;), <br>[&#39;<strong class="markup--strong markup--pre-strong">Game</strong>&#39;, &#39;<strong class="markup--strong markup--pre-strong">UserRepository</strong>&#39;]);</pre><pre name="d59c" id="d59c" class="graf graf--pre graf-after--pre">container<br>  .register(&#39;PlayerService&#39;, require(&#39;./PlayerService&#39;), <br>  [&#39;<strong class="markup--strong markup--pre-strong">UserRepository</strong>&#39;, &#39;<strong class="markup--strong markup--pre-strong">GameRepository</strong>&#39;]);</pre><p name="079e" id="079e" class="graf graf--p graf-after--pre">In this example I highlighted the important things. When the service (model, repository, facade) is registered in the container we have ability to specify dependencies which will be provided by container.</p><p name="5bd3" id="5bd3" class="graf graf--p graf-after--p">We have registered <strong class="markup--strong markup--p-strong">PlayerService</strong> which depends on <strong class="markup--strong markup--p-strong">UserRepository</strong> and <strong class="markup--strong markup--p-strong">GameRepository</strong>.</p><p name="1498" id="1498" class="graf graf--p graf-after--p">So if we need <strong class="markup--strong markup--p-strong">PlayerService</strong> let’s take it from the container.</p><pre name="dd95" id="dd95" class="graf graf--pre graf-after--p">var playerService = container.get(&#39;PlayerService&#39;); <br>playerService.getActivity().then(...) /// just simply</pre><p name="6414" id="6414" class="graf graf--p graf-after--pre">In this case, we don’t care about dependencies because they have already been described in the container and will be initialized in the right order.</p><p name="08a5" id="08a5" class="graf graf--p graf-after--p">Dependency injection container allows us to structure and manage dependencies and services and not the other way around :)</p><p name="e8ac" id="e8ac" class="graf graf--p graf-after--p">How to use, documentation:</p><p name="fc3e" id="fc3e" class="graf graf--p graf-after--p"><a href="https://www.npmjs.com/package/plus.container" data-href="https://www.npmjs.com/package/plus.container" class="markup--anchor markup--p-anchor" rel="nofollow">https://www.npmjs.com/package/plus.container</a></p><p name="cc95" id="cc95" class="graf graf--p graf-after--p graf--last">Best regards <a href="http://plus1generation.com/" data-href="http://plus1generation.com/" class="markup--anchor markup--p-anchor" rel="nofollow">+1G Team</a></p></div></div></section></div><footer class="u-paddingTop10"><div class="container u-maxWidth740"><div class="row"><div class="col u-size12of12"></div></div><div class="row"><div class="col u-size12of12 js-postTags"><div class="u-paddingBottom10"><div class="tags tags--postTags tags--borderless"><a class="link u-baseColor--link"  href="https://medium.com/tag/nodejs?source=post" data-action-source="post">Nodejs</a><a class="link u-baseColor--link"  href="https://medium.com/tag/javascript?source=post" data-action-source="post">JavaScript</a><a class="link u-baseColor--link"  href="https://medium.com/tag/dependency-injection?source=post" data-action-source="post">Dependency Injection</a><a class="link u-baseColor--link"  href="https://medium.com/tag/object-oriented?source=post" data-action-source="post">Object Oriented</a></div></div></div></div><div class="row js-postActionsFooter"><div class="postActions col u-size12of12"><div class="u-floatLeft buttonSet buttonSet--withLabels"><div class="buttonSet-inner"><div class="js-actionRecommend" data-post-id="4412f4f62f84" data-is-icon-29px="true" data-has-recommend-list="true" data-source="post_actions_footer"><button class="button button--primary button--large button--chromeless is-touchIconFadeInPulse u-accentColor--buttonNormal button--withIcon button--withSvgIcon u-accentColor--iconLight js-actionRecommendButton"  title="Recommend to share this article with your followers and let the author know you liked it" aria-label="Recommend to share this article with your followers and let the author know you liked it" data-action="upvote" data-action-value="4412f4f62f84" data-action-source="post_actions_footer"><span class="button-defaultState"><span class="svgIcon svgIcon--heart svgIcon--29px"><svg class="svgIcon-use" width="29" height="29" viewBox="0 0 29 29" ><path d="M16.215 23.716c-.348.288-.984.826-1.376 1.158a.526.526 0 0 1-.68 0c-.36-.307-.92-.78-1.22-1.03C9.22 20.734 3 15.527 3 10.734 3 7.02 5.916 4 9.5 4c1.948 0 3.77.898 5 2.434C15.73 4.898 17.552 4 19.5 4c3.584 0 6.5 3.02 6.5 6.734 0 4.9-6.125 9.96-9.785 12.982zM19.5 5.2c-1.774 0-3.423.923-4.41 2.468a.699.699 0 0 1-.59.323.706.706 0 0 1-.59-.32c-.988-1.54-2.637-2.47-4.41-2.47-2.922 0-5.3 2.49-5.3 5.54 0 4.23 6.19 9.41 9.517 12.19.217.18.566.48.783.66l.952-.79c3.496-2.88 9.348-7.72 9.348-12.05 0-3.05-2.378-5.53-5.3-5.53z"/></svg></span></span><span class="button-activeState"><span class="svgIcon svgIcon--heartFilled svgIcon--29px"><svg class="svgIcon-use" width="29" height="29" viewBox="0 0 29 29" ><path d="M19.5 4c-1.948 0-3.77.898-5 2.434C13.27 4.898 11.448 4 9.5 4 5.916 4 3 7.02 3 10.734c0 4.793 6.227 10 9.95 13.11.296.25.853.723 1.212 1.03.196.166.48.166.677 0 .39-.332 1.02-.87 1.37-1.158 3.66-3.022 9.79-8.08 9.79-12.982C26 7.02 23.08 4 19.5 4z" fill-rule="evenodd"/></svg></span></span></button><button class="button button--chromeless u-baseColor--buttonNormal"  data-action="show-recommends" data-action-value="4412f4f62f84">8</button></div></div><div class="buttonSet-inner"><button class="button button--large button--dark button--chromeless is-touchIconBlackPulse u-baseColor--buttonDark button--withIcon button--withSvgIcon"  data-action="respond" data-action-source="post_actions_footer"><span class="svgIcon svgIcon--response svgIcon--29px"><svg class="svgIcon-use" width="29" height="29" viewBox="0 0 29 29" ><path d="M21.27 20.058c1.89-1.826 2.754-4.17 2.754-6.674C24.024 8.21 19.67 4 14.1 4 8.53 4 4 8.21 4 13.384c0 5.175 4.53 9.385 10.1 9.385 1.007 0 2-.14 2.95-.41.285.25.592.49.918.7 1.306.87 2.716 1.31 4.19 1.31.276-.01.494-.14.6-.36a.625.625 0 0 0-.052-.65c-.61-.84-1.042-1.71-1.282-2.58a5.417 5.417 0 0 1-.154-.75zm-3.85 1.324l-.083-.28-.388.12a9.72 9.72 0 0 1-2.85.424c-4.96 0-8.99-3.706-8.99-8.262 0-4.556 4.03-8.263 8.99-8.263 4.95 0 8.77 3.71 8.77 8.27 0 2.25-.75 4.35-2.5 5.92l-.24.21v.32c0 .07 0 .19.02.37.03.29.1.6.19.92.19.7.49 1.4.89 2.08-.93-.14-1.83-.49-2.67-1.06-.34-.22-.88-.48-1.16-.74z"/></svg></span></button><button class="button button--chromeless u-baseColor--buttonNormal"  data-action="scroll-to-responses">1</button></div></div><div class="u-floatRight buttonSet buttonSet--narrow"><button class="button button--large button--dark button--chromeless is-touchIconBlackPulse u-baseColor--buttonDark button--withIcon button--withSvgIcon"  title="Share on Twitter" aria-label="Share on Twitter" data-action="share-on-twitter" data-action-source="post_actions_footer"><span class="svgIcon svgIcon--twitter svgIcon--29px"><svg class="svgIcon-use" width="29" height="29" viewBox="0 0 29 29" ><path d="M21.967 11.8c.018 5.93-4.607 11.18-11.177 11.18-2.172 0-4.25-.62-6.047-1.76l-.268.422-.038.5.186.013.168.012c.3.02.44.032.6.046 2.06-.026 3.95-.686 5.49-1.86l1.12-.85-1.4-.048c-1.57-.055-2.92-1.08-3.36-2.51l-.48.146-.05.5c.22.03.48.05.75.08.48-.02.87-.07 1.25-.15l2.33-.49-2.32-.49c-1.68-.35-2.91-1.83-2.91-3.55 0-.05 0-.01-.01.03l-.49-.1-.25.44c.63.36 1.35.57 2.07.58l1.7.04L7.4 13c-.978-.662-1.59-1.79-1.618-3.047a4.08 4.08 0 0 1 .524-1.8l-.825.07a12.188 12.188 0 0 0 8.81 4.515l.59.033-.06-.59v-.02c-.05-.43-.06-.63-.06-.87a3.617 3.617 0 0 1 6.27-2.45l.2.21.28-.06c1.01-.22 1.94-.59 2.73-1.09l-.75-.56c-.1.36-.04.89.12 1.36.23.68.58 1.13 1.17.85l-.21-.45-.42-.27c-.52.8-1.17 1.48-1.92 2L22 11l.016.28c.013.2.014.35 0 .52v.04zm.998.038c.018-.22.017-.417 0-.66l-.498.034.284.41a8.183 8.183 0 0 0 2.2-2.267l.97-1.48-1.6.755c.17-.08.3-.02.34.03a.914.914 0 0 1-.13-.292c-.1-.297-.13-.64-.1-.766l.36-1.254-1.1.695c-.69.438-1.51.764-2.41.963l.48.15a4.574 4.574 0 0 0-3.38-1.484 4.616 4.616 0 0 0-4.61 4.613c0 .29.02.51.08.984l.01.02.5-.06.03-.5c-3.17-.18-6.1-1.7-8.08-4.15l-.48-.56-.36.64c-.39.69-.62 1.48-.65 2.28.04 1.61.81 3.04 2.06 3.88l.3-.92c-.55-.02-1.11-.17-1.6-.45l-.59-.34-.14.67c-.02.08-.02.16 0 .24-.01 2.12 1.55 4.01 3.69 4.46l.1-.49-.1-.49c-.33.07-.67.12-1.03.14-.18-.02-.43-.05-.64-.07l-.76-.09.23.73c.57 1.84 2.29 3.14 4.28 3.21l-.28-.89a8.252 8.252 0 0 1-4.85 1.66c-.12-.01-.26-.02-.56-.05l-.17-.01-.18-.01L2.53 21l1.694 1.07a12.233 12.233 0 0 0 6.58 1.917c7.156 0 12.2-5.73 12.18-12.18l-.002.04z"/></svg></span></button><button class="button button--large button--dark button--chromeless is-touchIconBlackPulse u-baseColor--buttonDark button--withIcon button--withSvgIcon"  title="Share on Facebook" aria-label="Share on Facebook" data-action="share-on-facebook" data-action-source="post_actions_footer"><span class="svgIcon svgIcon--facebook svgIcon--29px"><svg class="svgIcon-use" width="29" height="29" viewBox="0 0 29 29" ><path d="M16.39 23.61v-5.808h1.846a.55.55 0 0 0 .546-.48l.36-2.797a.551.551 0 0 0-.547-.62H16.39V12.67c0-.67.12-.813.828-.813h1.474a.55.55 0 0 0 .55-.55V8.803a.55.55 0 0 0-.477-.545c-.436-.06-1.36-.116-2.22-.116-2.5 0-4.13 1.62-4.13 4.248v1.513H10.56a.551.551 0 0 0-.55.55v2.797c0 .304.248.55.55.55h1.855v5.76c-4.172-.96-7.215-4.7-7.215-9.1 0-5.17 4.17-9.36 9.31-9.36 5.14 0 9.31 4.19 9.31 9.36 0 4.48-3.155 8.27-7.43 9.15M14.51 4C8.76 4 4.1 8.684 4.1 14.46c0 5.162 3.75 9.523 8.778 10.32a.55.55 0 0 0 .637-.543v-6.985a.551.551 0 0 0-.55-.55H11.11v-1.697h1.855a.55.55 0 0 0 .55-.55v-2.063c0-2.02 1.136-3.148 3.03-3.148.567 0 1.156.027 1.597.06v1.453h-.924c-1.363 0-1.93.675-1.93 1.912v1.78c0 .3.247.55.55.55h2.132l-.218 1.69H15.84c-.305 0-.55.24-.55.55v7.02c0 .33.293.59.623.54 5.135-.7 9.007-5.11 9.007-10.36C24.92 8.68 20.26 4 14.51 4"/></svg></span></button><button class="button button--large button--dark button--chromeless is-touchIconFadeInPulse u-baseColor--buttonDark button--withIcon button--withSvgIcon button--bookmark js-bookmarkButton"  title="Bookmark this story to read later" aria-label="Bookmark this story to read later" data-action="add-to-bookmarks" data-action-value="4412f4f62f84"><span class="button-defaultState"><span class="svgIcon svgIcon--bookmark svgIcon--29px"><svg class="svgIcon-use" width="29" height="29" viewBox="0 0 29 29" ><path d="M19.385 4h-9.77A2.623 2.623 0 0 0 7 6.615V23.01a1.022 1.022 0 0 0 1.595.847l5.905-4.004 5.905 4.004A1.022 1.022 0 0 0 22 23.011V6.62A2.625 2.625 0 0 0 19.385 4zM21 23l-5.91-3.955-.148-.107a.751.751 0 0 0-.884 0l-.147.107L8 23V6.615C8 5.725 8.725 5 9.615 5h9.77C20.275 5 21 5.725 21 6.615V23z" fill-rule="evenodd"/></svg></span></span><span class="button-activeState"><span class="svgIcon svgIcon--bookmarkFilled svgIcon--29px"><svg class="svgIcon-use" width="29" height="29" viewBox="0 0 29 29" ><path d="M19.385 4h-9.77A2.623 2.623 0 0 0 7 6.615V23.01a1.022 1.022 0 0 0 1.595.847l5.905-4.004 5.905 4.004A1.022 1.022 0 0 0 22 23.011V6.62A2.625 2.625 0 0 0 19.385 4z" fill-rule="evenodd"/></svg></span></span></button><button class="button button--large button--dark button--chromeless is-touchIconBlackPulse u-baseColor--buttonDark button--withIcon button--withSvgIcon js-moreActionsButton"  title="More actions" aria-label="More actions" data-action="more-actions" data-action-source="post_page"><span class="svgIcon svgIcon--more svgIcon--25px"><svg class="svgIcon-use" width="25" height="25"  viewBox="-480.5 272.5 21 21"><path d="M-463 284.6c.9 0 1.6-.7 1.6-1.6s-.7-1.6-1.6-1.6-1.6.7-1.6 1.6.7 1.6 1.6 1.6zm0 .9c-1.4 0-2.5-1.1-2.5-2.5s1.1-2.5 2.5-2.5 2.5 1.1 2.5 2.5-1.1 2.5-2.5 2.5zm-7-.9c.9 0 1.6-.7 1.6-1.6s-.7-1.6-1.6-1.6-1.6.7-1.6 1.6.7 1.6 1.6 1.6zm0 .9c-1.4 0-2.5-1.1-2.5-2.5s1.1-2.5 2.5-2.5 2.5 1.1 2.5 2.5-1.1 2.5-2.5 2.5zm-7-.9c.9 0 1.6-.7 1.6-1.6s-.7-1.6-1.6-1.6-1.6.7-1.6 1.6.7 1.6 1.6 1.6zm0 .9c-1.4 0-2.5-1.1-2.5-2.5s1.1-2.5 2.5-2.5 2.5 1.1 2.5 2.5-1.1 2.5-2.5 2.5z"/></svg></span></button></div></div></div></div><div class="js-postPromotionWrapper postPromotionWrapper" data-location-id="footer_above_post_attribution"></div><div class="container u-maxWidth740 js-postAttributionFooterContainer"><div class="u-margin20"></div><div class="row js-postFooterInfo"><div class="col u-size12of12"><li class="card card-user"><div class="u-marginLeft20 u-floatRight"><span class="followState js-followState buttonSet-inner" data-user-id="38a6df4978c2"><button class="button button--small u-noUserSelect button--withChrome u-baseColor--buttonNormal button--withHover button--unblock js-unblockButton"  data-action="toggle-block-user" data-action-value="38a6df4978c2" data-action-source="footer_card"><span class="button-label  button-defaultState">Blocked</span><span class="button-label button-hoverState">Unblock</span></button><button class="button button--primary button--small u-noUserSelect button--withChrome u-accentColor--buttonNormal button--follow js-followButton"  data-action="toggle-subscribe-user" data-action-value="38a6df4978c2" data-action-source="footer_card_follow" data-subscribe-source="footer_card" data-follow-context-entity-id="4412f4f62f84"><span class="button-label  button-defaultState js-buttonLabel">Follow</span><span class="button-label button-activeState">Following</span></button></span></div><div class="u-tableCell "><a class="link avatar u-baseColor--link"  href="https://medium.com/@slavahatnuke?source=footer_card" title="Go to the profile of slava hatnuke" aria-label="Go to the profile of slava hatnuke" data-action-source="footer_card" data-user-id="38a6df4978c2" dir="auto"><img  src="https://cdn-images-1.medium.com/fit/c/60/60/0*Q8olK_tLvp-UYB9W.jpeg" class="avatar-image avatar-image--small" alt="Go to the profile of slava hatnuke"></a></div><div class="card-content"><h3 class="card-name"><a class="link link--primary u-accentColor--hoverTextNormal"  href="https://medium.com/@slavahatnuke" property="cc:attributionName" title="Go to the profile of slava hatnuke" aria-label="Go to the profile of slava hatnuke" rel="author cc:attributionUrl" data-user-id="38a6df4978c2" dir="auto">slava hatnuke</a></h3></div></li></div></div></div><div class="js-postBundleWrapper postBundleWrapper"></div><div class="js-postFooterPlacements"></div><div class="responsesWrapper supplementalPostContent js-responsesWrapper"></div><div class="supplementalPostContent js-readNext"></div><div class="supplementalPostContent js-heroPromo"></div></footer></article></main></div></div></div><div class="loadingBar"></div><script>// <![CDATA[
window["obvInit"] = function (opt_embedded) {window["obvInit"]["embedded"] = opt_embedded; window["obvInit"]["ready"] = true;}
// ]]></script><script>// <![CDATA[
var GLOBALS = {"audioUrl":"https://d1fcbxp97j4nb2.cloudfront.net","baseUrl":"https://medium.com","buildLabel":"26018-5dc70cf","currentUser":{"userId":"78ef69fc0cb8","username":"muemue","name":"Mue Mue","imageId":"0*gIsElKkAYGrurD0_.png","createdAt":1414778554894,"updatedAt":1478547082462,"postsRead":180,"lastTimezoneOffsetMin":-120,"languageCode":"en-us","allowEmails":0,"allowSocialEmails":0,"allowFollowerEmails":0,"facebookAccountId":"1376825405942317","facebookDisplayName":"Mue Mue","isVerified":true,"subscriberEmail":"","allowAllEmails":0,"allowLetterEmails":0,"allowProductEmails":0,"allowMentionEmails":0,"googleAccountId":"112933357306560701452","allowOutreachEmails":0},"currentUserHasUnverifiedEmail":false,"isAuthenticated":true,"isCurrentUserVerified":true,"language":"en-us","mediumTwitterScreenName":"medium","miroUrl":"https://cdn-images-1.medium.com","moduleUrls":{"base":"https://cdn-static-1.medium.com/_/fp/js/main-base.bundle.ndU3LUCHRYeIa3bLXwx-nA.js","notes":"https://cdn-static-1.medium.com/_/fp/js/main-notes.bundle.-l44xqDPs5jaKPZ5nK_aUQ.js","posters":"https://cdn-static-1.medium.com/_/fp/js/main-posters.bundle.p3xmY0UVXqUL8b8lA54ZWQ.js","common-async":"https://cdn-static-1.medium.com/_/fp/js/main-common-async.bundle.POKSU70ewAwfVElfB-7AwQ.js","stats":"https://cdn-static-1.medium.com/_/fp/js/main-stats.bundle.fcIag-Tlh8tl6Nsd4arqUA.js","misc-screens":"https://cdn-static-1.medium.com/_/fp/js/main-misc-screens.bundle.GZRL8KC4F-YSX6pTYIcoIA.js"},"previewConfig":{"weightThreshold":1,"weightImageParagraph":0.51,"weightIframeParagraph":0.8,"weightTextParagraph":0.08,"weightEmptyParagraph":0,"weightP":0.003,"weightH":0.005,"weightBq":0.003,"minPTextLength":60,"truncateBoundaryChars":20,"detectTitle":true,"detectTitleLevThreshold":0.15},"productName":"Medium","supportsEdit":true,"termsUrl":"//medium.com/policy/9db0094a1e0f","textshotHost":"textshot.medium.com","transactionId":"1478628848241:c7c5fa7ccdf1","useragent":{"browser":"chromium","family":"chrome","os":"","version":53,"supportsDesktopEdit":true,"supportsInteract":true,"supportsView":true,"isMobile":false,"isTablet":false,"isNative":false,"supportsFileAPI":true,"isTier1":true,"clientVersion":"","unknownParagraphsBad":false,"clientChannel":"","supportsRealScrollEvents":true,"supportsVhUnits":true,"ruinsViewportSections":false,"supportsHtml5Video":true,"supportsMagicUnderlines":true,"isWebView":false,"isFacebookWebView":false,"supportsProgressiveMedia":true,"supportsPromotedPosts":true,"isBot":false,"supportsScrollableMetabar":true},"variants":{"allow_access":true,"allow_signup":true,"allow_test_auth":"disallow","signin_services":"twitter,facebook,google,email,google-fastidv","signup_services":"twitter,facebook,google,email,google-fastidv","enable_smyte_integration":true,"android_rating_prompt_recommend_threshold":5,"google_sign_in_android":true,"enable_onboarding":true,"custom_miro_url":"https://cdn-images-1.medium.com","ios_custom_miro_url":"https://cdn-images-1.medium.com","reengagement_notification_duration":3,"enable_inline_code_creation":true,"enable_related_reads_webui":true,"enable_hopper_for_tag_based_post_bundles":true,"enable_next_tick_update":true,"enable_similar_post_provider":true,"enable_deep_social_graph_provider":true,"enable_adsnative_integration":true,"browsable_stream_config_bucket":"curated","ios_small_post_preview_truncation_length":5.5,"ios_large_post_preview_truncation_length":5.5,"disable_ios_catalog_badging":true,"enable_ranked_feed_survey_promo":true,"enable_textshots_v2":true,"enable_textshots_v2_web_ui":true,"enable_dark_sign_in_modals":true,"enable_ios_personalization_promo":true,"add_top_stories_in_digest":true,"digest_experiment":"control","enable_prepublish_share_settings":true,"enable_direct_auth_connect":true,"enable_prepublish_twitter_connect":true,"enable_hide_response_on_parent_post":true,"enable_automatic_profile_registration":true,"enable_sponsored_post_labelling":true,"stream_publication_homepage":true,"enable_choose_side_rail":true,"enable_collection_nav_external_links":true,"enable_view_collection_nav_external_links":true,"enable_logged_in_follow_on_collection_post":true,"social_recs_weight_factor":1,"enable_publication_archive_page":true,"enable_prepublish_facebook_share":true,"enable_prepublish_facebook_connect":true,"promoted_story_placement_locations":"POST_PAGE_FOOTER,POST_PAGE_BELOW_POST_ACTIONS","can_see_publication_takeovers":true,"enable_stats_response_filtering":true,"enable_ios_feature_education":true,"enable_related_reads_curse_words_filtering":true,"enable_normalized_email_check":true,"enable_author_invite":true,"enable_search_collection_by_tag_recency_filter":true,"search_collection_by_tag_filter_min_votes":10,"enable_stream_ttr_on_post_page":true,"enable_curated_placements":true,"enable_sentiment_analysis":true,"honeypot_strategy":"entity","enable_share_widget":true,"enable_drag_and_drop_ui":true,"enable_mobile_share_widget":true,"enable_mobile_web_image_grids":true,"enable_catalog_takeover_route":true,"show_more_placements":"control","enable_manual_engagements":true,"enable_new_hero_promo":true,"honeypot_footer_copy_strategy":1,"user_popover_hover_300_ms":true},"xsrfToken":"jcxqgH4vIpIu7IdB","iosAppId":"828256236","supportEmail":"yourfriends@medium.com","teamName":"Team Medium","fp":{"/img/apple-touch-icon-ipad-retina.png":"https://cdn-static-1.medium.com/_/fp/img/apple-touch-icon-ipad-retina.Akq8aSfZqfW1fceMxKqBZA.png","/img/apple-touch-icon-iphone-retina.png":"https://cdn-static-1.medium.com/_/fp/img/apple-touch-icon-iphone-retina.c211N_zSkSXPQk-ggPi4mQ.png","/img/apple-touch-icon-ipad.png":"https://cdn-static-1.medium.com/_/fp/img/apple-touch-icon-ipad.LSTr_8Uf-3hSd7eDjoW_8g.png","/img/apple-touch-icon.png":"https://cdn-static-1.medium.com/_/fp/img/apple-touch-icon.JWwtHOsKxVkBzoR3FSccjw.png","/img/default-avatar.png":"https://cdn-static-1.medium.com/_/fp/img/default-avatar.dmbNkD5D-u45r44go_cf0g.png","/img/default-preview-image.png":"https://cdn-static-1.medium.com/_/fp/img/default-preview-image.IsBK38jFAJBlWifMLO4z9g.png","/img/default-preview-image-v2.png":"https://cdn-static-1.medium.com/_/fp/img/default-preview-image-v2.MXL-j6S8fTEd8UFP_foEEw.png","/img/email/app_store_badge@2x.png":"https://cdn-static-1.medium.com/_/fp/img/email/app_store_badge@2x.8bDQGNMm-Xs7Hz6WA2XquQ.png","/img/email/app-devices@2x.png":"https://cdn-static-1.medium.com/_/fp/img/email/app-devices@2x.6hgpI423F62SKyT8Lo6dzA.png","/img/email/check1.png":"https://cdn-static-1.medium.com/_/fp/img/email/check1.0DM77li7vZhq5o2V9cVYLQ.png","/img/email/check2.png":"https://cdn-static-1.medium.com/_/fp/img/email/check2.GLlNusQmn1hwo9WDN-gE1w.png","/img/email/check3.png":"https://cdn-static-1.medium.com/_/fp/img/email/check3.7VxOUVMXAVbHRRnzMrJ_5A.png","/img/email/email-logo.png":"https://cdn-static-1.medium.com/_/fp/img/email/email-logo.x91rxfZYzIT9OJ5-ySD30A.png","/img/email/fb_logo.png":"https://cdn-static-1.medium.com/_/fp/img/email/fb_logo.Q0M98YwNTu77gLWTK6-RyQ.png","/img/email/google_play_badge@2x.png":"https://cdn-static-1.medium.com/_/fp/img/email/google_play_badge@2x.iWEWlt5_Qj20rr79-IGEBQ.png","/img/email/heart.png":"https://cdn-static-1.medium.com/_/fp/img/email/heart._hlyuYQiuuTWrRmDnDphJA.png","/img/email/heart@2x.png":"https://cdn-static-1.medium.com/_/fp/img/email/heart@2x.qvCTX1XHNpntqxt01oypQw.png","/img/email/heart1.png":"https://cdn-static-1.medium.com/_/fp/img/email/heart1.rnGEmSwcGUhztl_zSU7l6Q.png","/img/email/heart2.png":"https://cdn-static-1.medium.com/_/fp/img/email/heart2.HBiLu3koIYsKjjKroohgbA.png","/img/email/heart3.png":"https://cdn-static-1.medium.com/_/fp/img/email/heart3.AIJBOHw11HuhdClVJNtmtg.png","/img/email/large.png":"https://cdn-static-1.medium.com/_/fp/img/email/large.4EIhZbIk5sgqYSoB4YPmUA.png","/img/email/response.png":"https://cdn-static-1.medium.com/_/fp/img/email/response.5ZuN24N5XqS7ofHKg1lKXw.png","/img/email/response@2x.png":"https://cdn-static-1.medium.com/_/fp/img/email/response@2x.xzKQM4FzSurAVkghLQQWkA.png","/img/email/trophy.png":"https://cdn-static-1.medium.com/_/fp/img/email/trophy.YXqqMnNASKQDXZ46YdTWFA.png","/img/email/twitter_logo.png":"https://cdn-static-1.medium.com/_/fp/img/email/twitter_logo.Pz4a3o9WMU5QioxLKcyFhQ.png","/img/email/unlisted.png":"https://cdn-static-1.medium.com/_/fp/img/email/unlisted.ikh8R2LElOz_1YM8A2Db4g.png","/img/email/welcome-heart.png":"https://cdn-static-1.medium.com/_/fp/img/email/welcome-heart.6BRCOGcwGeOCBTql8pbq2g.png","/img/email/welcome-response.png":"https://cdn-static-1.medium.com/_/fp/img/email/welcome-response.iWVQLjiUG5pyQrPyGiYEpw.png","/img/email/welcome-write.png":"https://cdn-static-1.medium.com/_/fp/img/email/welcome-write.afdGsuE6YDk3HkaIASRl0w.png","/img/help/add-media-start.gif":"https://cdn-static-1.medium.com/_/fp/img/help/add-media-start.GXmqQ2Svt1WfZGIZSM93tg.gif","/img/help/add-media.gif":"https://cdn-static-1.medium.com/_/fp/img/help/add-media.SZH2LBmkwVExuhozFfVvYg.gif","/img/help/embed-start.gif":"https://cdn-static-1.medium.com/_/fp/img/help/embed-start.EBJ2PcWFJuYopsQV4wwklA.gif","/img/help/embed.gif":"https://cdn-static-1.medium.com/_/fp/img/help/embed.1BM0Di9vd91Kv8fLioJabw.gif","/img/help/text-highlight-start.gif":"https://cdn-static-1.medium.com/_/fp/img/help/text-highlight-start.AvTbakaFuUCd05YoMECoMQ.gif","/img/help/text-highlight.gif":"https://cdn-static-1.medium.com/_/fp/img/help/text-highlight.XVChoKYZ1-s3gJgHm9-7Yg.gif","/img/help/2.0-add-media.gif":"https://cdn-static-1.medium.com/_/fp/img/help/2.0-add-media.LhrJcTFODoqjnPPuHNEInA.gif","/img/help/2.0-add-media-start.png":"https://cdn-static-1.medium.com/_/fp/img/help/2.0-add-media-start.PTVdm36977cSfaYOpMNTNQ.png","/img/help/2.0-highlight-menu.gif":"https://cdn-static-1.medium.com/_/fp/img/help/2.0-highlight-menu.eqlvF_kPTaDVcWZV4oPjVA.gif","/img/help/2.0-highlight-menu-start.png":"https://cdn-static-1.medium.com/_/fp/img/help/2.0-highlight-menu-start.bkThTm0MV-KahZWttjBlJQ.png","/img/help/2.0-embed.gif":"https://cdn-static-1.medium.com/_/fp/img/help/2.0-embed.2g5jIXYtWjsRFa9D-hBhMQ.gif","/img/help/2.0-embed-start.png":"https://cdn-static-1.medium.com/_/fp/img/help/2.0-embed-start.LGy_FmixvcoEVIDKjg1jwA.png","/img/help/2.0-mention.gif":"https://cdn-static-1.medium.com/_/fp/img/help/2.0-mention.H9pEv0eHAvkGUVqdrHxH5g.gif","/img/help/2.0-mention-start.png":"https://cdn-static-1.medium.com/_/fp/img/help/2.0-mention-start.ShYTOfy6w3VDU9PKFfOEyw.png","/img/help/highlight-tips-1.gif":"https://cdn-static-1.medium.com/_/fp/img/help/highlight-tips-1.dEp02HXMKtAeKxsV5MWqGg.gif","/img/help/highlight-tips-2.gif":"https://cdn-static-1.medium.com/_/fp/img/help/highlight-tips-2.SyXCciYXeNpx4-GUAuh0XQ.gif","/img/import/highlight-menu.png":"https://cdn-static-1.medium.com/_/fp/img/import/highlight-menu.kzoaVM8mJJ-Hu9m9uo3Omg.png","/img/import/image-highlight-menu.png":"https://cdn-static-1.medium.com/_/fp/img/import/image-highlight-menu.q43-H2dl0JvBS_5znQCW8A.png","/img/import/publish-metabar.png":"https://cdn-static-1.medium.com/_/fp/img/import/publish-metabar.YbEX1a2Pu0rAR_LuKeg8JA.png","/img/media-loading-placeholder.png":"https://cdn-static-1.medium.com/_/fp/img/media-loading-placeholder.b31hiO4ynbDLRrXWEFF4aQ.png","/img/payments/amex.png":"https://cdn-static-1.medium.com/_/fp/img/payments/amex.5EPSpIzX7GdCzJlp6ScaDw.png","/img/payments/diners.png":"https://cdn-static-1.medium.com/_/fp/img/payments/diners.NGD5bmkc-37YhAWWR1kzZQ.png","/img/payments/discover.png":"https://cdn-static-1.medium.com/_/fp/img/payments/discover.EZDA3I2LqtScyoBjwnpyAA.png","/img/payments/jcb.png":"https://cdn-static-1.medium.com/_/fp/img/payments/jcb.r4YW_7gdVvO70Y1uobs9zw.png","/img/payments/mastercard.png":"https://cdn-static-1.medium.com/_/fp/img/payments/mastercard.pkLRUgj9PI_snp1LBC8FYQ.png","/img/payments/placeholder.png":"https://cdn-static-1.medium.com/_/fp/img/payments/placeholder.UD4yFjC9YHrS0yCBRmRwvQ.png","/img/payments/visa.png":"https://cdn-static-1.medium.com/_/fp/img/payments/visa.0d40297wdAUwEkxSXQjBoQ.png","/img/payments/credit-card-sprite.png":"https://cdn-static-1.medium.com/_/fp/img/payments/credit-card-sprite.aNIJTodZTkf86-MUkQX7Xw.png","/img/signup/signup_education.png":"https://cdn-static-1.medium.com/_/fp/img/signup/signup_education.U40idKqxw3q2V5uNY4tV2w.png","/icons/favicon.svg":"https://cdn-static-1.medium.com/_/fp/icons/favicon.KjTfUJo7yJH_fCoUzzH3cg.svg","/icons/favicon-dev-editor.ico":"https://cdn-static-1.medium.com/_/fp/icons/favicon-dev-editor.YKKRxBO8EMvIqhyCwIiJeQ.ico","/icons/favicon-hatch-editor.ico":"https://cdn-static-1.medium.com/_/fp/icons/favicon-hatch-editor.BuEyHIqlyh2s_XEk4Rl32Q.ico","/icons/favicon-medium-editor.ico":"https://cdn-static-1.medium.com/_/fp/icons/favicon-medium-editor.PiakrZWB7Yb80quUVQWM6g.ico"},"authBaseUrl":"https://medium.com","imageUploadSizeMb":25,"isAuthDomainRequest":true,"algoliaApiEndpoint":"https://MQ57UUUQZ2-dsn.algolia.net","algoliaAppId":"MQ57UUUQZ2","algoliaSearchOnlyApiKey":"f2b83a373dfeab4286ac5e9da958a5a9","iosAppStoreUrl":"https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8","iosAppLinkBaseUrl":"medium:","algoliaIndexPrefix":"medium_","androidPlayStoreUrl":"https://play.google.com/store/apps/details?id=com.medium.reader","googleClientId":"216296035834-k1k6qe060s2tp2a2jam4ljdcms00sttg.apps.googleusercontent.com","androidPackage":"com.medium.reader","androidPlayStoreMarketScheme":"market://details?id=com.medium.reader","googleAuthUri":"https://accounts.google.com/o/oauth2/auth","androidScheme":"medium","layoutData":{"useDynamicScripts":false,"googleAnalyticsTrackingCode":"UA-24232453-2","jsShivUrl":"https://cdn-static-1.medium.com/_/fp/js/shiv.RI2ePTZ5gFmMgLzG5bEVAA.js","cssFontUrls":["https://cdn-static-1.medium.com/_/fp/css/fonts-base.by5Oi_VbnwEIvhnWIsuUjA.css"],"useDynamicCss":false,"faviconUrl":"https://cdn-static-1.medium.com/_/fp/icons/favicon-medium.TAS6uQ-Y7kcKgi0xjcYHXw.ico"},"authBaseUrlRev":"moc.muidem//:sptth","isDnt":false,"stripePublishableKey":"pk_live_7FReX44VnNIInZwrIIx6ghjl","archiveUploadSizeMb":100,"paymentData":{"currencies":{"1":{"label":"US Dollar","external":"usd"}},"countries":{"1":{"label":"United States of America","external":"US"}},"accountTypes":{"1":{"label":"Individual","external":"individual"},"2":{"label":"Company","external":"company"}}},"previewConfig2":{"weightThreshold":1,"weightImageParagraph":0.05,"raiseImage":true,"enforceHeaderHierarchy":true,"isImageInsetRight":true},"isAmp":false,"iosScheme":"medium","isSwBoot":false,"lightstep":{"accessToken":"ce5be895bef60919541332990ac9fef2","carrier":"{\"ot-tracer-spanid\":\"4ec6737837299ca1\",\"ot-tracer-traceid\":\"6b11dc342ce0aae8\",\"ot-tracer-sampled\":\"true\"}","host":"collector-medium.lightstep.com"},"facebook":{"key":"542599432471018","secret":"c14df7146e9052a1131f3c900c1f0644","token":"542599432471018|1JqjIwxSfY9jOt_KwjWEl1R7T6I","namespace":"medium-com","scope":{"default":["public_profile","email","user_friends"],"connect":["public_profile","email","user_friends"],"login":["public_profile","email","user_friends"],"share":["public_profile","email","user_friends","publish_actions"]},"smartPublishWhitelistedPublications":["bcc38c8f6edf","f3726e2a5878","828a270689e","81c7d351c056","f30e42fd7ff8","8bf1d7d3081b","d16afa0ae7c","d8f3f6ad9c31","e74de0cedea9","15f753907972","c8c6a6b01ebd","3412b9729488","2ce4bbcf83bb","544c7006046e","7bfcdbc6b30a","a268fd916824","458a773bccd2"],"instantArticles":{"published":true,"developmentMode":false}},"mailingListArchiveUploadSizeMb":2,"isDoNotAuth":false}
// ]]></script><script charset="UTF-8" src="https://cdn-static-1.medium.com/_/fp/js/main-base.bundle.ndU3LUCHRYeIa3bLXwx-nA.js" async></script><script>// <![CDATA[
window["obvInit"]({"value":{"id":"4412f4f62f84","versionId":"329c35cb928b","creatorId":"38a6df4978c2","creator":{"userId":"38a6df4978c2","name":"slava hatnuke","username":"slavahatnuke","createdAt":1448309713959,"lastPostCreatedAt":1467313333563,"imageId":"0*Q8olK_tLvp-UYB9W.jpeg","backgroundImageId":"","bio":"","twitterScreenName":"slavahatnuke","socialStats":{"userId":"38a6df4978c2","usersFollowedCount":71,"usersFollowedByCount":20,"type":"SocialStats"},"social":{"userId":"78ef69fc0cb8","targetUserId":"38a6df4978c2","type":"Social"},"facebookAccountId":"","allowNotes":1,"type":"User"},"homeCollectionId":"","title":"Manage your services —node.js dependency injection","detectedLanguage":"en","latestVersion":"7634498cfec6","latestPublishedVersion":"329c35cb928b","hasUnpublishedEdits":false,"latestRev":2588,"createdAt":1460395122842,"updatedAt":1466706909351,"acceptedAt":0,"firstPublishedAt":1466027840092,"latestPublishedAt":1466027840092,"vote":false,"experimentalCss":"","displayAuthor":"","content":{"subtitle":"Why? Because the dependency injection is the way to independence :)","bodyModel":{"paragraphs":[{"name":"f078","type":3,"text":"Manage your services —node.js dependency injection","markups":[]},{"name":"3caf","type":1,"text":"Why? Because the dependency injection is the way to independence :)","markups":[]},{"name":"6042","type":1,"text":"What does the dependency injection container do? I will try to answer this question.","markups":[]},{"name":"a897","type":1,"text":"We are working with a project that has been developed for 3 years and in which about 100 database entities. In addition, Redis, Neo4j, MySQL, caching, search. In general, all as usual complex.","markups":[]},{"name":"448d","type":1,"text":"This project uses an approach in which each entity has a Repository.","markups":[]},{"name":"a864","type":1,"text":"To put it simply if we have the User model we have UserRepository which stores the business logic.","markups":[]},{"name":"cf6a","type":1,"text":"Schematically, I will show it like this:","markups":[]},{"name":"fee8","type":8,"text":"User -\x3e UserRepository","markups":[]},{"name":"7a00","type":1,"text":"This approach is good, because application logic that stored on the controller level looks much worse. All of this can be shown as:","markups":[]},{"name":"83be","type":8,"text":"Game -\x3e GameRepository\nCard -\x3e CardRepository\nPayment -\x3e PaymentRepository\n....","markups":[]},{"name":"df0f","type":1,"text":"So we have 100 repositories. Here is an example:","markups":[]},{"name":"e9f0","type":8,"text":"// UserRepository.js\nmodule.exports = function (app) {","markups":[]},{"name":"48a7","type":8,"text":"function UserRepository() {\n  this.User = mongoose.model('User')\n}","markups":[]},{"name":"3a38","type":8,"text":"UserRepository.prototype.getFriends = function (user) {\n // business logic here\n}","markups":[]},{"name":"4535","type":8,"text":"app.set('userRepository', new UserRepository());","markups":[]},{"name":"f396","type":8,"text":"}","markups":[]},{"name":"70b9","type":1,"text":"This approach allows us to store application business logic.","markups":[]},{"name":"e057","type":1,"text":"Example of initializing such repository:","markups":[]},{"name":"be4e","type":8,"text":"// app.js\nvar express = require('express');\nvar app = express();","markups":[]},{"name":"6229","type":8,"text":"require('./User')(app);\nrequire('./UserRepository')(app);","markups":[]},{"name":"9833","type":8,"text":"var userRepository = app.get('userRepository');","markups":[]},{"name":"788f","type":1,"text":"At this stage, it looks easy, till we do not take into account all the possible variations of initialization the 100 repositories and 100 entities.","markups":[]},{"name":"d967","type":1,"text":"I propose to add GameRepository.","markups":[]},{"name":"3925","type":8,"text":"// app.js\nvar express = require('express');\nvar app = express();","markups":[]},{"name":"d93b","type":8,"text":"require('./Game')(app);\nrequire('./GameRepository')(app); ","markups":[{"type":1,"start":0,"end":58}]},{"name":"ca58","type":8,"text":"require('./User')(app);\nrequire('./UserRepository')(app);","markups":[]},{"name":"767c","type":8,"text":"var userRepository = app.get('userRepository');","markups":[]},{"name":"430f","type":1,"text":"But if we used UserRepository in GameRepository, we do not have such opportunity to get it, because it hasn’t been created yet.","markups":[]},{"name":"7e77","type":1,"text":"In this case, everything is simple, we can change the initialization and the issue is solved.","markups":[]},{"name":"1201","type":8,"text":"require('./User')(app);\nrequire('./UserRepository')(app);","markups":[]},{"name":"39a7","type":8,"text":"require('./Game')(app);\nrequire('./GameRepository')(app); \n// UserRepository can be used. [SOLVED]","markups":[{"type":1,"start":59,"end":98}]},{"name":"ac33","type":1,"text":"Let us remember that we have a 100 entities + 100 repositories. And when we move the initialization of one of the repositories we can break another repository. It looks like a hell :)","markups":[{"type":1,"start":160,"end":183}]},{"name":"8e57","type":1,"text":"But that’s not all the problems. Let’s imagine that we need PlayerService that uses GameRepository and UserRepository. And GameRepostiory uses UserRepository.","markups":[]},{"name":"3264","type":1,"text":"Here is an example of code:","markups":[]},{"name":"ee07","type":8,"text":"var userRepository = new UserRepository(User);\nvar gameRepository = new GameRepository(Game, userRepository)","markups":[]},{"name":"8eaa","type":8,"text":"var playerService = new PlayerService(userRepository, gameRepository);","markups":[]},{"name":"2033","type":8,"text":"playerService.getActivity().then(...) /// just for example","markups":[]},{"name":"1df8","type":1,"text":"Actually I was only needed PlayerService but because it has dependencies on other I have to worry about creating dependencies.","markups":[]},{"name":"44d2","type":1,"text":"It was decided to use a dependency injection container.","markups":[]},{"name":"d798","type":1,"text":"As developer I would like to take services (repositories) from the container and use it. I would be happy if it looked like this.","markups":[]},{"name":"c16a","type":8,"text":"container.get('GameRepository').getUserGames(user).then(......)","markups":[]},{"name":"99b6","type":1,"text":"or","markups":[]},{"name":"67dc","type":8,"text":"container.get('PlayerService').getActivity().then(...)","markups":[]},{"name":"2aa8","type":1,"text":"And all the work of creating the repository and processing dependencies was on the dependency injection container side.","markups":[]},{"name":"488c","type":1,"text":"Let’s look at how the container works.","markups":[]},{"name":"db7b","type":1,"text":"First imagine a container in which I can register services.","markups":[]},{"name":"7f9b","type":8,"text":"var container = new Container();\ncontainer.register([SERVICE_NAME], [SERVICE], [DEPENDENCIES])","markups":[]},{"name":"e8eb","type":1,"text":"In this example, let’s initialize UserRepository","markups":[]},{"name":"3ad8","type":8,"text":"var container = new Container();","markups":[]},{"name":"032e","type":8,"text":"container\n  .register('UserRepository', require('./UserRepository');","markups":[]},{"name":"1f65","type":1,"text":"Here is an UserRepository example","markups":[]},{"name":"1430","type":8,"text":"// UserRepository.js\nfunction UserRepository() {}","markups":[]},{"name":"7d96","type":8,"text":"UserRepository.prototype.getFriends = function (user) {\n // business logic here\n}","markups":[]},{"name":"12f1","type":8,"text":"module.exports = UserRepository;","markups":[]},{"name":"b146","type":1,"text":"If I ask the container to get repository I want to get it! How it was created and how dependencies have been processed — it is the responsibility of the container.","markups":[]},{"name":"506f","type":8,"text":"var repository = container.get('UserRepository');\nrepository instanceof UserRepository // true","markups":[]},{"name":"6d61","type":1,"text":"But where is dependency injection? Yes I agree. In this example, no dependencies.","markups":[]},{"name":"b257","type":1,"text":"Let’s return back to the services registration. We are creating a container with several services that have dependencies.","markups":[]},{"name":"2093","type":8,"text":"var container = new Container();","markups":[]},{"name":"6610","type":8,"text":"container\n  .register('User', require('./User'));","markups":[{"type":1,"start":23,"end":27}]},{"name":"f250","type":8,"text":"container\n  .register('UserRepository', require('./UserRepository'), ['User']);","markups":[{"type":1,"start":69,"end":77}]},{"name":"72cc","type":8,"text":"container\n  .register('Game', require('./Game'));","markups":[{"type":1,"start":23,"end":27}]},{"name":"dca6","type":8,"text":"container\n  .register('GameRepository', require('./GameRepository'), \n['Game', 'UserRepository']);","markups":[{"type":1,"start":72,"end":76},{"type":1,"start":80,"end":94}]},{"name":"d59c","type":8,"text":"container\n  .register('PlayerService', require('./PlayerService'), \n  ['UserRepository', 'GameRepository']);","markups":[{"type":1,"start":72,"end":86},{"type":1,"start":90,"end":104}]},{"name":"079e","type":1,"text":"In this example I highlighted the important things. When the service (model, repository, facade) is registered in the container we have ability to specify dependencies which will be provided by container.","markups":[]},{"name":"5bd3","type":1,"text":"We have registered PlayerService which depends on UserRepository and GameRepository.","markups":[{"type":1,"start":19,"end":32},{"type":1,"start":50,"end":64},{"type":1,"start":69,"end":83}]},{"name":"1498","type":1,"text":"So if we need PlayerService let’s take it from the container.","markups":[{"type":1,"start":14,"end":27}]},{"name":"dd95","type":8,"text":"var playerService = container.get('PlayerService'); \nplayerService.getActivity().then(...) /// just simply","markups":[]},{"name":"6414","type":1,"text":"In this case, we don’t care about dependencies because they have already been described in the container and will be initialized in the right order.","markups":[]},{"name":"08a5","type":1,"text":"Dependency injection container allows us to structure and manage dependencies and services and not the other way around :)","markups":[]},{"name":"e8ac","type":1,"text":"How to use, documentation:","markups":[]},{"name":"fc3e","type":1,"text":"https://www.npmjs.com/package/plus.container","markups":[{"type":3,"start":0,"end":44,"href":"https://www.npmjs.com/package/plus.container","title":"","rel":"","anchorType":0}]},{"name":"cc95","type":1,"text":"Best regards +1G Team","markups":[{"type":3,"start":13,"end":21,"href":"http://plus1generation.com/","title":"","rel":"","anchorType":0}]}],"sections":[{"name":"d30b","startIndex":0}]},"postDisplay":{"coverless":true}},"virtuals":{"createdAtRelative":"7 months ago","updatedAtRelative":"5 months ago","acceptedAtRelative":"","createdAtEnglish":"April 11, 2016","updatedAtEnglish":"June 23, 2016","acceptedAtEnglish":"","firstPublishedAtEnglish":"June 15, 2016","latestPublishedAtEnglish":"June 15, 2016","allowNotes":true,"snippet":"Why? Because the dependency injection is the way to independence :)","previewImage":{"imageId":"","filter":"","backgroundSize":"","originalWidth":0,"originalHeight":0,"strategy":"resample","height":0,"width":0},"wordCount":728,"imageCount":0,"readingTime":2.7471698113207546,"subtitle":"Why? Because the dependency injection is the way to independence :)","userPostRelation":{"userId":"78ef69fc0cb8","postId":"4412f4f62f84","readAt":0,"readLaterAddedAt":0,"votedAt":0,"collaboratorAddedAt":0,"notesAddedAt":0,"subscribedAt":0,"lastReadSectionName":"","lastReadVersionId":"","lastReadAt":0,"lastReadParagraphName":"","lastReadPercentage":0,"viewedAt":1478628840597,"presentedCountInResponseManagement":0,"clapCount":0,"seriesUpdateNotifsOptedInAt":0},"usersBySocialRecommends":[],"latestPublishedAtAbbreviated":"Jun 15","firstPublishedAtAbbreviated":"Jun 15","emailSnippet":"What does the dependency injection container do? I will try to answer this question.\n\nWe are working with a project that has been developed for 3 years and in which about 100 database entities. In addition, Redis, Neo4j, MySQL, caching, search. In general, all as usual complex.\n\nThis project uses an approach in which each entity has a Repository.\n\nTo put it simply if we have the User model we have UserRepository which stores the business logic.","recommends":8,"socialRecommends":[],"isBookmarked":false,"tags":[{"slug":"nodejs","name":"Nodejs","postCount":3548,"virtuals":{"isFollowing":false},"metadata":{"followerCount":5832,"postCount":3548,"coverImage":{"id":"1*68Kp8_XfEM3gUoS__WGx9Q.png","originalWidth":324,"originalHeight":371}},"type":"Tag"},{"slug":"javascript","name":"JavaScript","postCount":18808,"virtuals":{"isFollowing":false},"metadata":{"followerCount":20909,"postCount":18808,"coverImage":{"id":"1*1XEF9NuNQy0rSu4kVdbb6A.jpeg","originalWidth":2048,"originalHeight":1366}},"type":"Tag"},{"slug":"dependency-injection","name":"Dependency Injection","postCount":94,"virtuals":{"isFollowing":false},"metadata":{"followerCount":64,"postCount":94,"coverImage":{"id":"1*t8PvW0oG9RK9wha5_kQIaw.png","originalWidth":2764,"originalHeight":1440}},"type":"Tag"},{"slug":"object-oriented","name":"Object Oriented","postCount":350,"virtuals":{"isFollowing":false},"metadata":{"followerCount":187,"postCount":350,"coverImage":{"id":"1*HohFGja4Uw40yk0ezcNamA.jpeg","originalWidth":1440,"originalHeight":600}},"type":"Tag"}],"socialRecommendsCount":0,"responsesCreatedCount":1,"links":{"entries":[],"version":"0.3","generatedAt":1471966821532},"isLockedPreviewOnly":false,"takeoverId":""},"coverless":true,"slug":"manage-your-services-node-js-dependency-injection","translationSourcePostId":"","translationSourceCreatorId":"","isApprovedTranslation":false,"inResponseToPostId":"","inResponseToRemovedAt":0,"isTitleSynthesized":true,"allowResponses":true,"importedUrl":"","importedPublishedAt":0,"visibility":0,"uniqueSlug":"manage-your-services-node-js-dependency-injection-4412f4f62f84","previewContent":{"bodyModel":{"paragraphs":[{"name":"f078","type":3,"text":"Manage your services —node.js dependency injection","markups":[],"alignment":1},{"name":"3caf","type":1,"text":"Why? Because the dependency injection is the way to independence :)","markups":[],"alignment":1},{"name":"6042","type":1,"text":"What does the dependency injection container do? I will try to answer this question.","markups":[],"alignment":1}],"sections":[{"startIndex":0}]},"isFullContent":false},"license":0,"inResponseToMediaResourceId":"","canonicalUrl":"https://medium.com/@slavahatnuke/manage-your-services-node-js-dependency-injection-4412f4f62f84","approvedHomeCollectionId":"","newsletterId":"","webCanonicalUrl":"https://medium.com/@slavahatnuke/manage-your-services-node-js-dependency-injection-4412f4f62f84","mediumUrl":"https://medium.com/@slavahatnuke/manage-your-services-node-js-dependency-injection-4412f4f62f84","migrationId":"","notifyFollowers":true,"notifyTwitter":false,"isSponsored":false,"isRequestToPubDisabled":false,"notifyFacebook":false,"responseHiddenOnParentPostAt":0,"isSeries":false,"type":"Post"},"collaborators":[],"membershipPlans":[],"collectionUserRelations":[],"mode":null,"references":{"User":{"38a6df4978c2":{"userId":"38a6df4978c2","name":"slava hatnuke","username":"slavahatnuke","createdAt":1448309713959,"lastPostCreatedAt":1467313333563,"imageId":"0*Q8olK_tLvp-UYB9W.jpeg","backgroundImageId":"","bio":"","twitterScreenName":"slavahatnuke","socialStats":{"userId":"38a6df4978c2","usersFollowedCount":71,"usersFollowedByCount":20,"type":"SocialStats"},"social":{"userId":"78ef69fc0cb8","targetUserId":"38a6df4978c2","type":"Social"},"facebookAccountId":"","allowNotes":1,"type":"User"}},"Social":{"38a6df4978c2":{"userId":"78ef69fc0cb8","targetUserId":"38a6df4978c2","type":"Social"}},"SocialStats":{"38a6df4978c2":{"userId":"38a6df4978c2","usersFollowedCount":71,"usersFollowedByCount":20,"type":"SocialStats"}}}})
// ]]></script></body></html>